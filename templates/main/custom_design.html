{% extends 'base.html' %}

{% block title %}صمم تيشيرتك الخاص - متجر فلسطين براند{% endblock %}

{% block content %}
<section class="new-custom-design py-5">
    <div class="container">
        <div class="row align-items-center gx-lg-5">
            <div class="col-lg-6">
                <div class="tshirt-design-preview position-relative">
                    <img src="{{ url_for('static', filename='images/custom-tshirt-placeholder.png') }}" alt="T-shirt with your design" id="tshirt-preview" class="img-fluid rounded-3 shadow-lg mb-4 mb-lg-0">
                    <div id="design-placeholder-text" class="position-absolute top-50 start-50 translate-middle text-center" style="pointer-events: none;">
                        <h3 class="text-muted">تصميمك هنا</h3>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="custom-design-form p-4 p-lg-5 bg-light rounded-3">
                    <h2 class="fw-bold mb-3">ارفع تصميمك</h2>
                    <p class="text-muted mb-4">ارفع تصميمك أو صورتك الآن، واختر المقاس واللون، واترك الباقي علينا لنطبع لك تيشيرت أحلامك!</p>
                    <form method="post" action="{{ url_for('main.upload_custom_design') }}" enctype="multipart/form-data">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        
                        <div class="mb-3">
                            <label for="designImage" class="form-label fw-semibold">1. ارفع صورة التصميم</label>
                            <input type="file" class="form-control form-control-lg" id="designImage" name="design_image" accept="image/*" required onchange="previewImage(event)">
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="size" class="form-label fw-semibold">2. اختر المقاس</label>
                                <select class="form-select form-select-lg" id="size" name="size" required>
                                    <option value="S">S</option>
                                    <option value="M" selected>M</option>
                                    <option value="L">L</option>
                                    <option value="XL">XL</option>
                                    <option value="XXL">XXL</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label fw-semibold">3. اختر اللون</label>
                                <div class="d-flex gap-3 pt-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="color" id="colorWhite" value="white" checked>
                                        <label class="form-check-label" for="colorWhite">أبيض</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="color" id="colorBlack" value="black">
                                        <label class="form-check-label" for="colorBlack">أسود</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="designDetails" class="form-label fw-semibold">4. تفاصيل إضافية (اختياري)</label>
                            <textarea class="form-control form-control-lg" id="designDetails" name="details" rows="2" placeholder="أي ملاحظات حول التصميم، مكان الطباعة، إلخ."></textarea>
                        </div>

                        <div class="d-grid">
                           <button type="submit" class="btn btn-primary btn-lg fw-bold">إرسال الطلب</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
function previewImage(event) {
    const reader = new FileReader();
    reader.onload = function(){
        const output = document.getElementById('tshirt-preview');
        output.src = reader.result;
        const placeholderText = document.getElementById('design-placeholder-text');
        if (placeholderText) {
            placeholderText.style.display = 'none';
        }
    };
    reader.readAsDataURL(event.target.files[0]);
}
</script>
{% endblock %} 